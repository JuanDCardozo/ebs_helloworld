files:
  "/etc/filebeat/filebeat.yml":
    mode: "000755"
    owner: root
    group: root
    filebeat.prospectors:
    - input_type: log
      paths:
        - /var/log/*.log
      input_type: log
      document_type: syslog
      registry: /var/lib/filebeat/registry
    output.elasticsearch:
        hosts: ["http://18.221.239.75:9200"]
        protocol: "https"

commands:
  1_command:
    command: "curl -L -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-5.2.0-x86_64.rpm"
    cwd: /home/ec2-user
  2_command:
    command: "rpm -ivh --replacepkgs filebeat-5.2.0-x86_64.rpm"
    cwd: /home/ec2-user
  3_command:
    command: "/etc/init.d/filebeat start"
